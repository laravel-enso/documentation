(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{318:function(e,a,t){"use strict";t.r(a);var s=t(2),o=Object(s.a)({},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"localisation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#localisation","aria-hidden":"true"}},[e._v("#")]),e._v(" Localisation")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://www.codacy.com/app/laravel-enso/Localisation?utm_source=github.com&utm_medium=referral&utm_content=laravel-enso/Localisation&utm_campaign=Badge_Grade",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://api.codacy.com/project/badge/Grade/235db862227e460792a72a1e65427d1f",alt:"Codacy Badge"}}),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://styleci.io/repos/85617309",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://styleci.io/repos/85617309/shield?branch=master",alt:"StyleCI"}}),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://packagist.org/packages/laravel-enso/localisation",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://poser.pugx.org/laravel-enso/localisation/license",alt:"License"}}),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://packagist.org/packages/laravel-enso/localisation",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://poser.pugx.org/laravel-enso/localisation/downloads",alt:"Total Downloads"}}),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://packagist.org/packages/laravel-enso/localisation",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://poser.pugx.org/laravel-enso/localisation/version",alt:"Latest Stable Version"}}),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("Localisation management dependency for "),t("a",{attrs:{href:"https://github.com/laravel-enso/Enso",target:"_blank",rel:"noopener noreferrer"}},[e._v("Laravel Enso"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://laravel-enso.github.io/localisation/screenshots/bulma_010.png",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://laravel-enso.github.io/localisation/screenshots/bulma_010_thumb.png",alt:"Screenshot"}}),t("OutboundLink")],1)]),e._v(" "),t("p",[t("a",{attrs:{href:"https://laravel-enso.github.io/localisation/videos/bulma_demo_01.webm",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://laravel-enso.github.io/localisation/screenshots/bulma_011_thumb.png",alt:"Watch the demo"}}),t("OutboundLink")],1),e._v(" "),t("sup",[e._v("click on the photo to view a short demo in compatible browsers")])]),e._v(" "),t("h2",{attrs:{id:"features"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#features","aria-hidden":"true"}},[e._v("#")]),e._v(" Features")]),e._v(" "),t("ul",[t("li",[e._v("allows an easier management of languages, keys and translations in the context of a multi language application")]),e._v(" "),t("li",[e._v("uses the newer Laravel "),t("code",[e._v("__()")]),e._v(" translation method and stores keys and translations inside a JSON file")]),e._v(" "),t("li",[e._v("permits adding as many languages as you require and the quick creation of translations for the keys you need")]),e._v(" "),t("li",[e._v("the language selector is easily accessible in the right-hand sidebar")])]),e._v(" "),t("h2",{attrs:{id:"under-the-hood"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#under-the-hood","aria-hidden":"true"}},[e._v("#")]),e._v(" Under the Hood")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("the "),t("code",[e._v("languages")]),e._v(" table stores the available languages for localisation")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("name")]),e._v(" - the language code, e.g. 'en'")]),e._v(" "),t("li",[t("code",[e._v("display_name")]),e._v(" - the label for the language, visible in the UI, e.g. 'English'")]),e._v(" "),t("li",[t("code",[e._v("flag")]),e._v(" - the icon class used for showing the flag")]),e._v(" "),t("li",[t("code",[e._v("is_active")]),e._v(" - flag for marking a language as active/inactive")])])]),e._v(" "),t("li",[t("p",[e._v("when translating, the new Laravel mechanism is used, respectively the "),t("code",[e._v("__()")]),e._v(" function")])]),e._v(" "),t("li",[t("p",[e._v("the main language is considered to be english")])]),e._v(" "),t("li",[t("p",[e._v("the keys are, by convention, in english and in a human readable format e.g. 'Date of Birth', and if a key is not found, the value of the key is used instead")])]),e._v(" "),t("li",[t("p",[e._v("the keys and the values for the project specific keys are kept in "),t("code",[e._v("resources/lang/app/*code*.json")]),e._v("  where code is the language code, e.g. 'de' for german, with the exception for the English language, since keys are already in English")])]),e._v(" "),t("li",[t("p",[e._v("the keys and the values for the core/Enso specific keys are kept in "),t("code",[e._v("resources/lang/enso/*code*.json")])])]),e._v(" "),t("li",[t("p",[e._v("due to Laravel's implementation, there are 4 translation categories which cannot be implemented using the new mechanism: "),t("code",[e._v("auth")]),e._v(", "),t("code",[e._v("pagination")]),e._v(", "),t("code",[e._v("passwords")]),e._v(", "),t("code",[e._v("validation")]),e._v(". For this reason, we keep the respective language files in their proper language sub-folders")])]),e._v(" "),t("li",[t("p",[e._v("the moment a new language is added from the interface")]),e._v(" "),t("ul",[t("li",[e._v("the new language is saved in the database")]),e._v(" "),t("li",[e._v("the four php translation files are copied to a newly created language folder")]),e._v(" "),t("li",[e._v("a new JSON language file is generated, containing the keys for the existing core/Enso translations, at "),t("code",[e._v("resources/lang/enso/")]),e._v(". The keys are collected using as reference the first existing JSON file")]),e._v(" "),t("li",[e._v("a new JSON language file is generated, which is empty, and which will hold project specific keys")])])]),e._v(" "),t("li",[t("p",[e._v("when deleting a language")]),e._v(" "),t("ul",[t("li",[e._v("the language is removed from the database")]),e._v(" "),t("li",[e._v("the language folder and its contents are removed")]),e._v(" "),t("li",[e._v("the two JSON language files are removed")])])]),e._v(" "),t("li",[t("p",[e._v("the "),t("code",[e._v("set-language")]),e._v(" middleware is used to set the locale for the backend, for each request, depending on\nthe user's language preference")])]),e._v(" "),t("li",[t("p",[e._v("the "),t("code",[e._v("LanguagePolicy")]),e._v(" ensures that when deleting a language, a user cannot delete the default language, or\nthe language he has currently set as active in his preferences")])]),e._v(" "),t("li",[t("p",[e._v("the list of languages and the translations are loaded on app init, so the changes will be available at the next login\nor at a page refresh")])]),e._v(" "),t("li",[t("p",[e._v("the authentication and password reset pages would not normally have available the user's preferences\n(which include the chosen language). To get around this, the app checks the browser's local storage for the preferences,\nif they have been previously set, falling back to the default application language otherwise.")])])]),e._v(" "),t("h2",{attrs:{id:"usage-notes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usage-notes","aria-hidden":"true"}},[e._v("#")]),e._v(" Usage Notes")]),e._v(" "),t("p",[e._v("Please note that because we want to keep the compiled size down, throughout the enso ecosystem,\nicons are imported selectively.")]),e._v(" "),t("p",[e._v("What this means for the localisation package, is that when adding a new language, you should also make sure you\nimport the required flag icon SVG and declare the corresponding class. The proper place to include the new icon is:")]),e._v(" "),t("p",[t("code",[e._v("resources/assets/sass/app.scss")])]),e._v(" "),t("h2",{attrs:{id:"publishes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#publishes","aria-hidden":"true"}},[e._v("#")]),e._v(" Publishes")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("php artisan vendor:publish --tag=localisation-assets")]),e._v(" - the VueJS components and pages")]),e._v(" "),t("li",[t("code",[e._v("php artisan vendor:publish --tag=enso-assets")]),e._v(" - a common alias for when wanting to update the VueJS assets,\nonce a newer version is released, can be used with the "),t("code",[e._v("--force")]),e._v(" flag")]),e._v(" "),t("li",[t("code",[e._v("php artisan vendor:publish --tag=localisation-factory")]),e._v(" - the factory used for localisation")]),e._v(" "),t("li",[t("code",[e._v("php artisan vendor:publish --tag=enso-factories")]),e._v(" - a common alias for when wanting to update the factories\nonce a newer version is released, usually used with the "),t("code",[e._v("--force")]),e._v(" flag")]),e._v(" "),t("li",[t("code",[e._v("php artisan vendor:publish --tag=localisations-seeder")]),e._v(" - the seeder used for localisation")]),e._v(" "),t("li",[t("code",[e._v("php artisan vendor:publish --tag=enso-seeders")]),e._v(" - a common alias for when wanting to update the seeders\nonce a newer version is released, usually used with the "),t("code",[e._v("--force")]),e._v(" flag")]),e._v(" "),t("li",[t("code",[e._v("php artisan vendor:publish --tag=localisations-config")]),e._v(" - the configuration")]),e._v(" "),t("li",[t("code",[e._v("php artisan vendor:publish --tag=localisation-lang-files")]),e._v(" - the localisation language files")])]),e._v(" "),t("h2",{attrs:{id:"contributing"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#contributing","aria-hidden":"true"}},[e._v("#")]),e._v(" Contributing")]),e._v(" "),t("p",[e._v("First off, thanks for taking the time to contribute a new language and translations.")]),e._v(" "),t("p",[e._v("For country flags, we're using the "),t("a",{attrs:{href:"http://flag-icon-css.lip.is/",target:"_blank",rel:"noopener noreferrer"}},[e._v("flag-icon-css"),t("OutboundLink")],1),e._v(" library,\nso make sure to take a look and identify your country's xx\n"),t("a",{attrs:{href:"https://www.iso.org/obp/ui/#search",target:"_blank",rel:"noopener noreferrer"}},[e._v("2 letter iso_3166_2 standard"),t("OutboundLink")],1),e._v(" short name.")]),e._v(" "),t("h3",{attrs:{id:"new-language"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#new-language","aria-hidden":"true"}},[e._v("#")]),e._v(" New language")]),e._v(" "),t("p",[e._v("Due to the modular structure of the project, a few steps are necessary:")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("From the UI, navigate to "),t("code",[e._v("/system/localisation/create")]),e._v(", add a new language. Under the hood, this creates a few files:")]),e._v(" "),t("ul",[t("li",[e._v("a new language file in "),t("code",[e._v("src/resources/lang/app/xx.json")]),e._v(", for the project specific translations,")]),e._v(" "),t("li",[e._v("a new language file in "),t("code",[e._v("src/resources/lang/enso/xx.json")]),e._v(", for the core Enso translations,")]),e._v(" "),t("li",[e._v("a new folder in "),t("code",[e._v("src/resources/lang/xx")]),e._v(" which contains\nthe required Laravel translation files ("),t("code",[e._v("auth.php")]),e._v(", "),t("code",[e._v("pagination.php")]),e._v(", "),t("code",[e._v("passwords.php")]),e._v(" and "),t("code",[e._v("validation.php")]),e._v(")")])]),e._v(" "),t("p",[e._v("At this stage, the new language will appear in the list without a flag,\nand that's ok, since the flag class is not yet imported.")])]),e._v(" "),t("li",[t("p",[e._v("Use the interface to translate the existing core keys, by accessing "),t("code",[e._v("/system/localisation/editTexts")]),e._v(",\nselecting the new language and flipping the "),t("code",[e._v("app/core")]),e._v(" switch to core")])]),e._v(" "),t("li",[t("p",[e._v("Update the "),t("code",[e._v("vendor/laravel-enso/localisation/src/database/migrations/2017_01_01_134500_create_structure_for_localisation.php")]),e._v("\nmigration to include the new language")])]),e._v(" "),t("li",[t("p",[e._v("Add a new SCSS class for the country flag in "),t("code",[e._v("resources/assets/sass/flags.scss")]),e._v(",\nusing the existing ones as example")])]),e._v(" "),t("li",[t("p",[e._v("Add the new language in "),t("code",[e._v("resources/assets/js/components/enso/vueforms/flatpickrLocale.js")]),e._v(",\nusing the existing ones as example")])]),e._v(" "),t("li",[t("p",[e._v("Add the new language in "),t("code",[e._v("src/resources/assets/js/modules/enso/plugins/date-fns/i18n.js")])])])]),e._v(" "),t("p",[e._v("At this stage, you've made the necessary changes, and everything should work, after compiling the front-end assets with\n"),t("code",[e._v("npm run webpack")]),e._v(".\nNext, we need to commit all updated files to their respective repositories,\nsince we've been working on the published resources and some of these might get overwritten at the next Enso update.")]),e._v(" "),t("h4",{attrs:{id:"changes-per-package"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#changes-per-package","aria-hidden":"true"}},[e._v("#")]),e._v(" Changes per package")]),e._v(" "),t("h5",{attrs:{id:"the-localisation-package"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#the-localisation-package","aria-hidden":"true"}},[e._v("#")]),e._v(" The Localisation package")]),e._v(" "),t("ol",[t("li",[e._v("already contains the updated migration "),t("code",[e._v("2017_01_01_134500_create_structure_for_localisation.php")]),e._v(" (ref. step 3, above)")]),e._v(" "),t("li",[e._v("copy the new app lang file "),t("code",[e._v("xx.json")]),e._v(" from "),t("code",[e._v("resources/lang/app/")]),e._v(" to "),t("code",[e._v("vendor/laravel-enso/localisation/src/resources/lang/app/")])]),e._v(" "),t("li",[e._v("copy the new core Enso lang file "),t("code",[e._v("xx.json")]),e._v(" from "),t("code",[e._v("resources/lang/enso/")]),e._v(" to "),t("code",[e._v("vendor/laravel-enso/localisation/src/resources/lang/enso/")])]),e._v(" "),t("li",[e._v("copy the new folder "),t("code",[e._v("xx")]),e._v(" from  "),t("code",[e._v("resources/lang/")]),e._v(" to "),t("code",[e._v("vendor/laravel-enso/localisation/src/resources/lang/")])])]),e._v(" "),t("h5",{attrs:{id:"the-core-package"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#the-core-package","aria-hidden":"true"}},[e._v("#")]),e._v(" The Core package")]),e._v(" "),t("ol",[t("li",[e._v("copy the updated "),t("code",[e._v("flags.scss")]),e._v(" from "),t("code",[e._v("resources/assets/sass/")]),e._v(" to "),t("code",[e._v("vendor/laravel-enso/core/src/resources/assets/sass/")])]),e._v(" "),t("li",[e._v("copy the updated "),t("code",[e._v("i18n.js")]),e._v(" from "),t("code",[e._v("src/resources/assets/js/modules/enso/plugins/date-fns/")]),e._v(" to "),t("code",[e._v("vendor/laravel-enso/core/src/resources/assets/js/modules/enso/plugins/date-fns")])])]),e._v(" "),t("h5",{attrs:{id:"the-formbuilder-package"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#the-formbuilder-package","aria-hidden":"true"}},[e._v("#")]),e._v(" The FormBuilder package")]),e._v(" "),t("ol",[t("li",[e._v("copy the updated "),t("code",[e._v("flatpickrLocale.js")]),e._v(" from "),t("code",[e._v("resources/assets/js/components/enso/vueforms/")]),e._v(" to "),t("code",[e._v("vendor/laravel-enso/formbuilder/src/resources/assets/js/components/enso/vueforms")])])]),e._v(" "),t("h4",{attrs:{id:"finally"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#finally","aria-hidden":"true"}},[e._v("#")]),e._v(" Finally")]),e._v(" "),t("p",[e._v("Make pull requests for these three packages, with the files mentioned above.")]),e._v(" "),t("h3",{attrs:{id:"existing-language"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#existing-language","aria-hidden":"true"}},[e._v("#")]),e._v(" Existing language")]),e._v(" "),t("p",[e._v("First off, thanks for taking the time to contribute with translations for the project.")]),e._v(" "),t("p",[e._v("From time to time, as the project grows, new text/keys are added and the translations need to be updated. If you notice\nmissing translations, and want to add them, please follow the steps below.")]),e._v(" "),t("h4",{attrs:{id:"adding-missing-translations"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#adding-missing-translations","aria-hidden":"true"}},[e._v("#")]),e._v(" Adding missing translations")]),e._v(" "),t("ol",[t("li",[e._v("Make sure you have the latest version of the translation files (you may manually update/replace the contents of your local"),t("code",[e._v("resources/lang/enso/xx.json")]),e._v(" from "),t("a",{attrs:{href:"https://github.com/laravel-enso/Localisation/tree/master/src/resources/lang/enso",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),t("OutboundLink")],1),e._v(")")]),e._v(" "),t("li",[e._v("From the UI, navigate to "),t("code",[e._v("/system/localisation/")]),e._v(" and click on "),t("code",[e._v("Edit Texts")]),e._v(".")]),e._v(" "),t("li",[e._v("Choose the desired language, flip the type switch to "),t("code",[e._v("Core")]),e._v(" and ideally also enable the "),t("code",[e._v("Only missing")]),e._v(" filter")]),e._v(" "),t("li",[e._v("Fill in the missing texts and save your changes by clicking "),t("code",[e._v("Update")])]),e._v(" "),t("li",[e._v("Copy the content of "),t("code",[e._v("resources/lang/enso/xx.json")]),e._v(" as this is where your changes are saved")]),e._v(" "),t("li",[e._v("Navigate "),t("a",{attrs:{href:"https://github.com/laravel-enso/Localisation/tree/master/src/resources/lang/enso",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),t("OutboundLink")],1),e._v(" and click on the pencil button to edit the file")]),e._v(" "),t("li",[e._v("Paste your translations")]),e._v(" "),t("li",[e._v("Create a pull request for the changes")])]),e._v(" "),t("h2",{attrs:{id:"notes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#notes","aria-hidden":"true"}},[e._v("#")]),e._v(" Notes")]),e._v(" "),t("p",[e._v("The "),t("a",{attrs:{href:"https://github.com/laravel-enso/Core",target:"_blank",rel:"noopener noreferrer"}},[e._v("Laravel Enso Core"),t("OutboundLink")],1),e._v(" package comes with this package included.")]),e._v(" "),t("p",[e._v("Depends on:")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/laravel-enso/Core",target:"_blank",rel:"noopener noreferrer"}},[e._v("Core"),t("OutboundLink")],1),e._v(" for middleware, user and preferences models")]),e._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/laravel-enso/StructureManager",target:"_blank",rel:"noopener noreferrer"}},[e._v("Structure manager"),t("OutboundLink")],1),e._v(" for the migrations")]),e._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/laravel-enso/VueDatatable",target:"_blank",rel:"noopener noreferrer"}},[e._v("VueDatatable"),t("OutboundLink")],1),e._v(" for displaying the list of languages")]),e._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/laravel-enso/FormBuilder",target:"_blank",rel:"noopener noreferrer"}},[e._v("FormBuilder"),t("OutboundLink")],1),e._v(" for creating the forms when managing languages")]),e._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/laravel-enso/Helpers",target:"_blank",rel:"noopener noreferrer"}},[e._v("Helpers"),t("OutboundLink")],1),e._v(" for utility classes and traits")])])])},[],!1,null,null,null);a.default=o.exports}}]);