(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{289:function(e,t,a){"use strict";a.r(t);var o=a(2),n=Object(o.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"documents-manager"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#documents-manager","aria-hidden":"true"}},[e._v("#")]),e._v(" Documents Manager")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://www.codacy.com/app/laravel-enso/DocumentsManager?utm_source=github.com&utm_medium=referral&utm_content=laravel-enso/DocumentsManager&utm_campaign=Badge_Grade",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://api.codacy.com/project/badge/Grade/3118ebe6bb4647df99675e83a9f56de2",alt:"Codacy Badge"}}),a("OutboundLink")],1),e._v(" "),a("a",{attrs:{href:"https://styleci.io/repos/85587885",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://styleci.io/repos/85587885/shield?branch=master",alt:"StyleCI"}}),a("OutboundLink")],1),e._v(" "),a("a",{attrs:{href:"https://packagist.org/packages/laravel-enso/datatable",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://poser.pugx.org/laravel-enso/datatable/license",alt:"License"}}),a("OutboundLink")],1),e._v(" "),a("a",{attrs:{href:"https://packagist.org/packages/laravel-enso/documentsmanager",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://poser.pugx.org/laravel-enso/documentsmanager/downloads",alt:"Total Downloads"}}),a("OutboundLink")],1),e._v(" "),a("a",{attrs:{href:"https://packagist.org/packages/laravel-enso/documentsmanager",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://poser.pugx.org/laravel-enso/documentsmanager/version",alt:"Latest Stable Version"}}),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("Documents Manager for "),a("a",{attrs:{href:"https://github.com/laravel-enso/Enso",target:"_blank",rel:"noopener noreferrer"}},[e._v("Laravel Enso"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://laravel-enso.github.io/documentsmanager/videos/bulma_demo_01.webm",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://laravel-enso.github.io/documentsmanager/screenshots/bulma_019_thumb.png",alt:"Watch the demo"}}),a("OutboundLink")],1)]),e._v(" "),a("p",[a("sup",[e._v("click on the photo to view a short demo in compatible browsers")])]),e._v(" "),a("h2",{attrs:{id:"features"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#features","aria-hidden":"true"}},[e._v("#")]),e._v(" Features")]),e._v(" "),a("ul",[a("li",[e._v("permits the management (upload, download, delete, show) of documents in the application")]),e._v(" "),a("li",[e._v("can attach documents to any other model")]),e._v(" "),a("li",[e._v("comes with its own VueJS components")]),e._v(" "),a("li",[e._v("uses "),a("a",{attrs:{href:"https://github.com/laravel-enso/FileManager",target:"_blank",rel:"noopener noreferrer"}},[e._v("FileManager"),a("OutboundLink")],1),e._v(" for file operations")]),e._v(" "),a("li",[e._v("uses the "),a("a",{attrs:{href:"https://github.com/laravel-enso/ImageTransformer",target:"_blank",rel:"noopener noreferrer"}},[e._v("ImageTransformer"),a("OutboundLink")],1),e._v(" package for optimizing\nthe uploaded image files")]),e._v(" "),a("li",[e._v("security policies are used to enforce proper user authorization")]),e._v(" "),a("li",[e._v("comes with a "),a("code",[e._v("Documentable")]),e._v(" trait that can be quickly added to the model you want to give this functionality to")]),e._v(" "),a("li",[e._v("offers various configuration options, including the option to delete all attached documents\nto a Documentable entity, when it gets deleted")])]),e._v(" "),a("h2",{attrs:{id:"under-the-hood"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#under-the-hood","aria-hidden":"true"}},[e._v("#")]),e._v(" Under the Hood")]),e._v(" "),a("ul",[a("li",[e._v("creates a "),a("code",[e._v("Document")]),e._v(" model that has a "),a("code",[e._v("documentable")]),e._v(" morphTo relationship")]),e._v(" "),a("li",[e._v("polymorphic relationships are used, which makes it possible to attach documents to any other entity")]),e._v(" "),a("li",[e._v("within the entity to which we want to attach documents, we must use the "),a("code",[e._v("Documentable")]),e._v(" trait")]),e._v(" "),a("li",[e._v("once documents are attached to an entity, you should not be able to delete the entity without deciding what\nyou want to do with the associated documents. This is configurable in the options, see below")])]),e._v(" "),a("h2",{attrs:{id:"installation-steps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installation-steps","aria-hidden":"true"}},[e._v("#")]),e._v(" Installation Steps")]),e._v(" "),a("p",[e._v("This package is already included in "),a("a",{attrs:{href:"https://github.com/laravel-enso/Enso",target:"_blank",rel:"noopener noreferrer"}},[e._v("Laravel Enso"),a("OutboundLink")],1),e._v(", so no further steps are necessary.")]),e._v(" "),a("h2",{attrs:{id:"usage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usage","aria-hidden":"true"}},[e._v("#")]),e._v(" Usage")]),e._v(" "),a("ol",[a("li",[e._v("Import the VueJS component in your page/component and then compile")])]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" Documents "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'../../../components/enso/documents/Documents.vue'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[e._v("Add the component inside your page/component")])]),e._v(" "),a("div",{staticClass:"language-vue extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),e._v("documents")]),e._v(" \n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("modelId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("model_class"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("</")]),e._v("documents")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n")])])]),a("p",[e._v("Note: you may substitute the documents component with the documents-card component as the two share the main properties\nand the documents-card is a card wrapper for the bare documents component.")]),e._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[e._v("Add "),a("code",[e._v("use Documentable")]),e._v(" in the Model that need documents and import the trait. Then you'll have access to the "),a("code",[e._v("$model->documents")]),e._v(" relationship")])]),e._v(" "),a("li",[a("p",[e._v("Because users upload documents you can add "),a("code",[e._v("use Documents")]),e._v(" to the User model. This trait will set the relationship between users and the documents that they create")])])]),e._v(" "),a("p",[a("strong",[e._v("IMPORTANT NOTE:")])]),e._v(" "),a("p",[e._v("Since this package is using image processing libraries and these underlying libraries may use a lot of memory,\nespecially if the processed files are large (for example, for an 8MB image file, more than 128MB of memory might be used ),\nmake sure to configure php accordingly and/or do "),a("code",[e._v("ini_set(‘memory_limit’, ‘256M’);")])]),e._v(" "),a("p",[e._v("Failure to do so may result in silent errors if allotted memory is insufficient.")]),e._v(" "),a("h2",{attrs:{id:"options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options","aria-hidden":"true"}},[e._v("#")]),e._v(" Options")]),e._v(" "),a("h3",{attrs:{id:"documentscard-vue"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#documentscard-vue","aria-hidden":"true"}},[e._v("#")]),e._v(" DocumentsCard.vue")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("id")]),e._v(" - number, the id of the documentable model | required")]),e._v(" "),a("li",[a("code",[e._v("type")]),e._v(" - string, the documentable model class | required")]),e._v(" "),a("li",[a("code",[e._v("open")]),e._v(" - boolean flag, makes the component start collapsed or open | default is "),a("code",[e._v("false")]),e._v(" | (optional)")]),e._v(" "),a("li",[a("code",[e._v("title")]),e._v(" - string, title for the component | default "),a("code",[e._v("''")]),e._v(" | (optional)")])]),e._v(" "),a("h3",{attrs:{id:"documents-vue"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#documents-vue","aria-hidden":"true"}},[e._v("#")]),e._v(" Documents.vue")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("id")]),e._v(" - number, the id of the documentable model | required")]),e._v(" "),a("li",[a("code",[e._v("type")]),e._v(" - string, the documentable model class | required")]),e._v(" "),a("li",[a("code",[e._v("query")]),e._v(" - string, text used for filtering the documents| default "),a("code",[e._v("null")]),e._v(" | (optional)")]),e._v(" "),a("li",[a("code",[e._v("controls")]),e._v(" - boolean, used for showing the controls buttons | default "),a("code",[e._v("false")]),e._v(" | (optional)")])]),e._v(" "),a("h2",{attrs:{id:"configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuration","aria-hidden":"true"}},[e._v("#")]),e._v(" Configuration")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("config/enso/documents.php")]),e._v(" configuration file, lets you customize the following:")]),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("deletableTimeLimit")]),e._v(" - the time limit for deleting an uploaded document, in seconds.\nDefault is "),a("code",[e._v("60 * 60")]),e._v("  (1 hour)")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("linkExpiration")]),e._v(", - the time limit for document share link, in seconds.\nDefault is "),a("code",[e._v("60 * 60 * 24")]),e._v("  (1 day)")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("imageWidth")]),e._v(" - the image width, in pixels, used when resizing bigger picture files. Default is "),a("code",[e._v("2048")])])]),e._v(" "),a("li",[a("p",[a("code",[e._v("imageHeight")]),e._v(" - the image height, in pixels, used when resizing bigger picture files. Default is "),a("code",[e._v("2048")])])]),e._v(" "),a("li",[a("p",[a("code",[e._v("onDelete")]),e._v(", string, option that manages the case when the commentable entity is deleted and it has attached addresses.\nValid options are "),a("code",[e._v("cascade")]),e._v(", "),a("code",[e._v("restrict")]),e._v(" | default is "),a("code",[e._v("cascade")])]),e._v(" "),a("p",[e._v("With the cascade option, when a commentable model is deleted, the comments attached to it are also deleted.\nWith the restrict option,  when attempting to delete a commentable model with attached comments, an exception is thrown.")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("loggableMorph")]),e._v(", the list of entities using the commentable functionality, each mapped to its respective loggable attribute\nFor example:")]),e._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[e._v("'commentable'")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n    Company"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[e._v("'name'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n")])])]),a("p",[e._v("This configuration is used for activity logging.")])])]),e._v(" "),a("h2",{attrs:{id:"publishes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#publishes","aria-hidden":"true"}},[e._v("#")]),e._v(" Publishes")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("php artisan vendor:publish --tag=documents-assets")]),e._v(" - the VueJS components")]),e._v(" "),a("li",[a("code",[e._v("php artisan vendor:publish --tag=documents-config")]),e._v(" - configuration file")]),e._v(" "),a("li",[a("code",[e._v("php artisan vendor:publish --tag=enso-assets")]),e._v(" - a common alias for when wanting to update the VueJS components,\nonce a newer version is released, usually used with the "),a("code",[e._v("--force")]),e._v(" flag")]),e._v(" "),a("li",[a("code",[e._v("php artisan vendor:publish --tag=enso-config")]),e._v(" - a common alias for when wanting to update the config,\nonce a newer version is released, usually used with the "),a("code",[e._v("--force")]),e._v(" flag")])]),e._v(" "),a("h2",{attrs:{id:"notes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#notes","aria-hidden":"true"}},[e._v("#")]),e._v(" Notes")]),e._v(" "),a("p",[e._v("The "),a("a",{attrs:{href:"https://github.com/laravel-enso/Enso",target:"_blank",rel:"noopener noreferrer"}},[e._v("Laravel Enso"),a("OutboundLink")],1),e._v(" package comes with this package included.")]),e._v(" "),a("p",[e._v("Depends on:")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/laravel-enso/activitylog",target:"_blank",rel:"noopener noreferrer"}},[e._v("ActivityLog"),a("OutboundLink")],1),e._v(" for logging operations on Documents")]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/laravel-enso/Core",target:"_blank",rel:"noopener noreferrer"}},[e._v("Core"),a("OutboundLink")],1),e._v(" for middleware and user model")]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/laravel-enso/Helpers",target:"_blank",rel:"noopener noreferrer"}},[e._v("Helpers"),a("OutboundLink")],1),e._v(" for the various helper classes")]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/laravel-enso/ImageTransformer",target:"_blank",rel:"noopener noreferrer"}},[e._v("ImageTransformer"),a("OutboundLink")],1),e._v(" for optimizing image files")]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/laravel-enso/FileManager",target:"_blank",rel:"noopener noreferrer"}},[e._v("FileManager"),a("OutboundLink")],1),e._v(" for working with the uploaded files")]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/laravel-enso/StructureManager",target:"_blank",rel:"noopener noreferrer"}},[e._v("Structure manager"),a("OutboundLink")],1),e._v(" for the migrations")]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/laravel-enso/TrackWho",target:"_blank",rel:"noopener noreferrer"}},[e._v("TrackWho"),a("OutboundLink")],1),e._v(" for keeping track of the users making the changes to each contact")]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/laravel-enso/VueComponents",target:"_blank",rel:"noopener noreferrer"}},[e._v("VueComponents"),a("OutboundLink")],1),e._v(" for the accompanying VueJS components")])])])},[],!1,null,null,null);t.default=n.exports}}]);